<!DOCTYPE html>
<html>
    <head>
        <title>Test runner back office</title>
        <link rel="stylesheet" type="text/css" href="/styles/base.css"/>
        <style>
            #create-objective {
                display: inline-block;
            }

            .objective-item {
                display: inline-block;
                width: 200px;
                text-align: center;
                vertical-align: top;
            }

            .status-pending,
            .status-failure,
            .status-success {
                line-height: 32px;
                vertical-align: middle;
            }
            
            .status-pending {
                background: rgb(253, 223, 187);
            }

            .status-failure {
                background: rgb(255, 137, 137);
            }

            .status-success {
                background: rgb(173, 246, 173);
            }

            .arrow {
                display: inline-block;
                width: 14px;
                height: 14px;
                vertical-align: middle;

                background: url('/back-office/images/right-arrow.png');
            }

            .add-objective {
                padding: 10px;
            }

            .definition-tag {
                background: rgba(0, 0, 0, 0.1);
            }

            .name-field {
                font-weight: bold;
            }

            .create-objective-field {
                width: 300px;
            }
        </style>
    </head>
    <body>
        <div class="title">
            <span class="logo">
            </span>
            <span class="meep-meep">Meep-Meep</span>
            - Test runner back office</div>
<% if(objectives.length) { %>
        <div class="table-header">
            <div class="objective-item">
                Name
            </div>
            <div class="objective-item">
                Status
            </div>
            <div class="objective-item">
                Definition
            </div>
        </div>
<% } %>
<% objectives.forEach(function(objective) { %>
            <div class="table-line">
                <div class="objective-item">
                    <%= objective.name %>
                </div>
                <div class="objective-item tag status-<%= objective.status.toLowerCase() %>">
                    <%= objective.status %>
                </div>
                <div class="objective-item">
                    <% objective.definition.forEach(function(constraint) { %>
                    <div>
                        <%- constraint[0].split(',').map(function(tag) {return '<span class="tag definition-tag">' + tag.trim() + '</span> '}).join('') %>
                        <span class="arrow"></span>
                        <span>
                        <%- constraint[1].split(',').map(function(tag) {return '<span class="tag definition-tag">' + tag.trim() + '</span> '}).join('') %>
                        </span>
                    </div>
                    <% }); %>
                </div>
            </div>
<% }); %>
        </div>
            <div class="section-title">Create a new test set</div>
        <form class="add-objective" method="POST" action="<%= backOfficeUrl %>objectives">
            <div class="label-group">
                <div class="label-group">
                    <div class="form-label">Name :</div>
                    <div class="form-label">Test tags :</div>
                    <div class="form-label">Platform tags :</div>
                </div>
                <div class="label-group">
                    <input class="form-text-field create-objective-field name-field" type="text" name="name" placeholder="Any alphanumeric value" required/>
                    <br/>

                    <input class="form-text-field create-objective-field" type="text" name="test-tags" placeholder="Coma-separated tags" required/>
                    <br/>

                    <input class="form-text-field create-objective-field" type="text" name="platform-tags" placeholder="Coma-separated tags or 'any'" required/>
                </div>
                </div>
            <br/>
            <br/>
            <input type="submit" class="button action" id="create-objective" value="Create"/>
        </form>
    </body>
</html>
